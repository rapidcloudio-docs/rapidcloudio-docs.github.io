{"name":"Documentation","tagline":"Rapidcloud Single Page Documentation","body":"Rapidcloud.io provides Java developers with turnkey application delivery services to the cloud. \r\n\r\n[General Overview](#general-overview) | \r\n[Networks](#networks) | \r\n[Server Setup](#server-setup)  |\r\n[Framework](#frameworks) \r\n\r\n# General Overview\r\n### Initial Setup\r\nGet started with rapidcloud by providing access keys to your AWS, Digital Ocean or Rackspace account and authorizing rapidcloud to read your Github or Bitbucket repositories. Once authorized for a cloud service provider can use rapidcloud to provision and configure Java web application servers.\r\n\r\n### Source Code\r\nAfter the server is provisioned and setup, you'll need to clone your application repository (from bitbucket or github) onto your cloud server. (Note: Rapidcloud does not keep a copy of your source code on its servers).\r\n\r\n### Compile and Package\r\nAfter cloning your application, you will be ready to build and deploy it. Rapidcloud does it's work by connecting to your server and executing the build commands, they are run from `/home/rc-build/repository`.\r\n\r\n#### Play\r\nFor play projects, the build step default to `sbt clean compile stage -Dsbt.log.noformat=true` (note: the noformat prevents the control characters from outputting and making the logs hard to read)\r\n\r\nYou can override these settings on your server's configuration page, however you'll need to make sure sure your application is packaged to deploy in the  `target/universal/stage/` folder after execution\r\n\r\n#### Maven/War Projects\r\nFor maven projects, the build step will default to `mvn clean package`. \r\n\r\nYou can override these settings on your server's configuration page, however you'll need to make sure a .war file is packaged in the projects target/ folder after execution.\r\n\r\n### Deploy\r\nOnce packaged, rapidcloud will attempt to deploy the projects\r\n\r\nRapidcloud offers two deployment strategies. Parallel deployment and traditional deployment. With parallel deployment enabled rapidcloud will alternate between two ports 8080/8081 for Maven/Tomcat projects and 9000/9001 for Play projects. \r\n\r\nThe deployment lifecycle works as follows\r\n\r\n1. Start the application on the alternate instance (non active port)\r\n2. Wait for the application start time to complete (adjust the time on the server configuration page)\r\n3. Verify the application via http at the confirmation url (specified on the server configuration page). If the verifiation url fails to return a 200 status code, stop execution and mark the deployment as failed.\r\n4. Signal Nginx to send all new requests to the new application instance\r\n5. Wait 1 minute for existing requests on the old instance to cooldown\r\n6. Shutdown the old instance\r\n\r\n#### Play\r\nFor play projects rapidcloud will copy the files in `target/universal/stage/` to `/opt/play/(8000|8001)/` and execute the cmd in /opt/play/(8000|8001)/bin to start the application. Command line arguments can be provided on the server configuration page. \r\n\r\n#### Tomcat\r\nFor play projects rapidcloud will copy the war file in target/ to /opt/tomcat/instances/(8080|8081)/webapps/ and start tomcat\r\n\r\n## Networks\r\n\r\n### Network Overview\r\nNetworks allow you to share servers across servers automatically, manage firewall/across rules across servers and define one set of environment variables for multiple servers\r\n\r\n### Network Services\r\nRapidcloud has three network friendly services, Memcached, Redis and MySQL. For an unnetworked server, access to those services is blocked either by iptables or AWS security groups, only permitting access from the local machine. \r\n\r\nWhen a server is joined to a network, rapidcloud automatically opens the ports to any installed network services up to other members of the network.\r\n\r\nIf there a Redis or Memcache servers in a network their IP addresses are published as environment variables to all members of the network.\r\n\r\n* NET_REDIS_SERVERS=ipAddress1,ipAddress2\r\n* NET_MEMCACHE_SERVERS=ipAddress1,ipAddress2\r\n\r\n### Network Database\r\nRapidcloud allows you to select one of the MySQL instances on a network as the network DB. Once this is done, the database connection information will be published to all members of the network as environment variables.\r\n\r\n* NET_DB_NAME=name\r\n* NET_DB_USER=login username\r\n* NET_DB_PASSWORD=login password\r\n* NET_DB_URL=jdbc url to the database\r\n\r\n# Server Setup\r\n### Application\r\n#### Play\r\nPlay is located in\r\n`/opt/play`\r\n\r\nIt is organized into two folders which the deployer switches back and forth between during parallel deployments.\r\n\r\n* /opt/play/9000\r\n* /opt/play/9001\r\n\r\nEach instance has its own log directory\r\n* /opt/play/9000/logs\r\n* /opt/play/9001/logs\r\n\r\nStandard error and standard out written to \r\n* /var/log/play/play_9000.err.log\r\n* /var/log/play/play_9000.out.log\r\n* /var/log/play/play_9001.err.log\r\n* /var/log/play/play_9001.out.log\r\n\r\n#### Tomcat\r\nTomcat is located in\r\n`/opt/tomcat/`\r\n\r\nIt is separated into a home and base for each instance.\r\n* CATALINA_HOME=/opt/tomcat\r\n* CATALINA_BASE=/opt/tomcat/instances/(8080|8081)\r\n\r\nEach instance has its own log directory\r\n* /opt/tomcat/instances/8080/log/\r\n* /opt/tomcat/instances/8081/log/\r\n\r\nStandard error and standard out are written to\r\n* /var/log/tomcat/tomcat_8080.err.log\r\n* /var/log/tomcat/tomcat_8080.out.log\r\n* /var/log/tomcat/tomcat_8081.err.log\r\n* /var/log/tomcat/tomcat_8081.out.log\r\n\r\n### Supervisor\r\nEach application is managed by supervisord to insure that it stays running by restarting it automatically if it fails unexpectedly and providing an easy way to manage its launch configuration.\r\n\r\nSupervisord config files are located in\r\n* `/etc/supervisor/conf.d`\r\n\r\nTo view the status of supervisor services type\r\n* `sudo supervisorctl status`\r\n\r\nTo restart a service type\r\n* `sudo supervisorctl restart <service_name>`\r\n\r\nTo load a new config file or apply changes made to one\r\n* `sudo supervisorctl reread`\r\n* `sudo supervisorctl reload`\r\n\r\n\r\nExample:\r\n* `sudo supervisorctl restart tomcat_8080`\r\n* `sudo supervisorctl restart play_9000`\r\n\r\n\r\nSupervisord also manages\r\n\r\n* nginx - nginx.supervisor.conf\r\n* memcached - memcached.supervisor.conf\r\n* reds - redis.supervisor.conf\r\n* remote_syslog (papertail) - remote_syslog.supervisor.conf\r\n \r\n#Frameworks\r\n### Support for war files\r\nAny framework which uses maven to build a war file should work with rapidcloud. \r\n\r\n### Spring-boot\r\nTo get spring-boot to generate a war file you can modify your pom.xml as follows:\r\n\r\n<pre>\r\n\t...\r\n\r\n\t<dependency>\r\n\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t<artifactId>spring-boot-starter-web</artifactId>\r\n\t\t<exclusions>\r\n\t\t\t<exclusion>\r\n\t\t\t\t<groupId>org.springframework.boot</groupId>\r\n\t\t\t\t<artifactId>spring-boot-starter-tomcat</artifactId>\r\n\t\t\t</exclusion>\r\n\t\t</exclusions>\r\n\t</dependency>\r\n\r\n\t...\r\n\t\r\n\t <profile>\r\n\t\t<id>webapp</id>\r\n\t\t<activation>\r\n\t\t\t<activeByDefault>false</activeByDefault>\r\n\t\t</activation>\r\n\t\t<properties>\r\n\t\t\t<packaging.type>war</packaging.type>\r\n\t\t</properties>\r\n\t</profile>\r\n\t\r\n\t...\r\n</pre>","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}